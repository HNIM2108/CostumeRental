<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒê·∫∑t Trang Ph·ª•c Online</title>
    <link rel="stylesheet" href="/css/style.css">
    <style>
        .booking-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .section {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            flex: 1 1 45%; /* Chia ƒë√¥i m√†n h√¨nh */
            min-width: 400px;
        }
        .full-width {
            flex: 1 1 100%;
        }
        .highlight {
            color: #dc3545; /* M√†u ƒë·ªè */
            font-weight: bold;
            font-size: 1.3em;
        }
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        /* CSS cho b·∫£ng cu·ªôn ƒë∆∞·ª£c n·∫øu danh s√°ch d√†i */
        .table-scroll {
            max-height: 250px;
            overflow-y: auto;
            border: 1px solid #eee;
        }
    </style>
</head>
<body>
<div class="container" style="max-width: 1200px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2 style="margin: 0;">ƒê·∫∑t L·ªãch Thu√™ Trang Ph·ª•c</h2>
        <a href="/" class="btn btn-secondary">üè† V·ªÅ Trang Ch·ªß</a>
    </div>
    <hr>

    <div class="booking-container">

        <div class="section" id="section-customer">
            <h3 style="color: #0056b3;">1. Th√¥ng tin Kh√°ch h√†ng</h3>
            <div class="form-group">
                <label>S·ªë ƒëi·ªán tho·∫°i kh√°ch h√†ng <span style="color:red">*</span>:</label>
                <div style="display: flex; gap: 10px;">
                    <input type="text" id="txtCustomerPhone" placeholder="Nh·∫≠p SƒêT (v√≠ d·ª•: 0912...)" style="flex: 1;">
                    <button id="btnFindCustomer" class="btn btn-primary">üîç T√¨m/T·∫°o</button>
                </div>
            </div>

            <div id="customerInfoArea" style="display: none; margin-top: 15px; background: #e9ecef; padding: 15px; border-radius: 5px;">
                <p style="margin: 5px 0;"><strong>H·ªç t√™n:</strong> <span id="lblCustomerName" style="color: #007bff;">---</span></p>
                <p style="margin: 5px 0;"><strong>ƒêi·ªÉm t√≠ch l≈©y:</strong> <span id="lblLoyaltyPoints" style="color: #28a745; font-weight: bold;">0</span> ƒëi·ªÉm</p>
                <p style="font-size: 0.9em; color: #666; margin: 5px 0;">(Kh√°ch h√†ng th√¢n thi·∫øt s·∫Ω ƒë∆∞·ª£c ∆∞u ƒë√£i gi·∫£m gi√° t·ª± ƒë·ªông)</p>
                <input type="hidden" id="hidCustomerId">
            </div>
        </div>

        <div class="section" id="section-product-list">
            <h3 style="color: #0056b3;">2. Ch·ªçn Trang Ph·ª•c</h3>
            <div class="form-group" style="display: flex; gap: 10px;">
                <input type="text" id="txtSearchCostume" placeholder="Nh·∫≠p t√™n trang ph·ª•c..." style="flex: 1;">
                <button id="btnSearchCostume" class="btn btn-primary">üîç T√¨m</button>
            </div>

            <div class="table-scroll">
                <table id="tblCostumeList">
                    <thead style="position: sticky; top: 0; z-index: 1;">
                    <tr>
                        <th>ID</th>
                        <th>T√™n trang ph·ª•c</th>
                        <th>Size</th>
                        <th>Gi√° thu√™/ng√†y</th>
                        <th>T·ªìn</th>
                        <th>Thao t√°c</th>
                    </tr>
                    </thead>
                    <tbody id="tbodyCostumeList">
                    <tr><td colspan="6" style="text-align: center;">ƒêang t·∫£i d·ªØ li·ªáu...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="section full-width" id="section-cart">
            <h3 style="color: #0056b3;">3. Gi·ªè h√†ng (C√°c m√≥n ƒë√£ ch·ªçn)</h3>

            <div style="background: #fff3cd; padding: 15px; margin-bottom: 15px; border: 1px solid #ffeeba; border-radius: 5px; display: flex; align-items: center; gap: 20px;">
                <div style="flex: 1;">
                    <label style="font-size: 0.9em;">ƒêang ch·ªçn:</label>
                    <strong id="lblSelectedCostumeName" style="color: #856404; font-size: 1.1em;">(Vui l√≤ng ch·ªçn t·ª´ danh s√°ch tr√™n)</strong>
                    <input type="hidden" id="txtSelectedCostumeId">
                    <input type="hidden" id="txtSelectedCostumePrice">
                </div>
                <div style="width: 100px;">
                    <label>S·ªë l∆∞·ª£ng:</label>
                    <input type="number" id="txtQuantity" value="1" min="1">
                </div>
                <div style="align-self: flex-end;">
                    <button id="btnAddToCart" class="btn btn-success" disabled>üõí Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <table id="tblCart">
                <thead>
                <tr>
                    <th>STT</th>
                    <th>T√™n trang ph·ª•c</th>
                    <th>ƒê∆°n gi√°</th>
                    <th>S·ªë l∆∞·ª£ng</th>
                    <th>Th√†nh ti·ªÅn</th>
                    <th>X√≥a</th>
                </tr>
                </thead>
                <tbody id="tbodyCart">
                <tr><td colspan="6" style="text-align: center; color: #999;">Gi·ªè h√†ng tr·ªëng</td></tr>
                </tbody>
            </table>
        </div>

        <div class="section full-width" id="section-checkout" style="background-color: #f8f9fa; border: 1px solid #ddd;">
            <h3 style="color: #0056b3;">4. X√°c nh·∫≠n ƒê∆°n h√†ng</h3>

            <div style="display: flex; gap: 40px;">
                <div style="flex: 1;">
                    <div class="form-group">
                        <label>Ng√†y b·∫Øt ƒë·∫ßu thu√™ <span style="color:red">*</span>:</label>
                        <input type="date" id="dtpStartDate">
                    </div>
                    <div class="form-group">
                        <label>Ng√†y d·ª± ki·∫øn tr·∫£ <span style="color:red">*</span>:</label>
                        <input type="date" id="dtpEndDate">
                    </div>
                    <div class="form-group">
                        <label>M√£ Khuy·∫øn M√£i (N·∫øu c√≥):</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="txtPromoCode" placeholder="Nh·∫≠p m√£ (VD: CHAOHE2025)">
                            <button id="btnApplyPromo" class="btn btn-secondary">√Åp d·ª•ng</button>
                        </div>
                        <span id="lblPromoMessage" style="font-size: 0.9em; margin-top: 5px; display: block;"></span>
                    </div>
                </div>

                <div style="flex: 1; background: white; padding: 20px; border-radius: 8px; border: 1px solid #eee;">
                    <div class="summary-row">
                        <span>Ti·ªÅn h√†ng t·∫°m t√≠nh:</span>
                        <span id="lblTotalAmount">0 ƒë</span>
                    </div>
                    <div class="summary-row" style="color: green;">
                        <span>Gi·∫£m gi√° (Voucher/VIP):</span>
                        <span id="lblDiscountAmount">- 0 ƒë</span>
                    </div>
                    <hr>
                    <div class="summary-row">
                        <strong>T·ªïng ti·ªÅn thu√™:</strong>
                        <strong id="lblAfterDiscount">0 ƒë</strong>
                    </div>
                    <div class="summary-row" style="color: #666; font-size: 0.9em;">
                        <i>C·∫ßn ƒë·∫∑t c·ªçc tr∆∞·ªõc (30%):</i>
                        <i id="lblDepositAmount">0 ƒë</i>
                    </div>

                    <div style="margin-top: 20px; text-align: right;">
                        <p style="font-size: 0.9em; color: #dc3545; margin-bottom: 5px;">* Vui l√≤ng ki·ªÉm tra k·ªπ th√¥ng tin tr∆∞·ªõc khi x√°c nh·∫≠n</p>
                        <button id="btnConfirmBooking" class="btn btn-danger" style="width: 100%; padding: 15px; font-size: 1.2em; text-transform: uppercase;">
                            X√°c Nh·∫≠n ƒê·∫∑t H√†ng
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<script src="/js/api-config.js"></script>
<script src="/js/booking.js"></script>

</body>
</html>